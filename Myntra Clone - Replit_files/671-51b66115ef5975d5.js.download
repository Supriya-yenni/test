"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{13455:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(2272),o=t(74985),i=t(50959),l=t(66482),a=t(48468),c=t(45510),u=t(85368),s=t(39541),d=t(33594),p=t(82568),m=t(56169),h=u.K.div,f=(0,p.X)({container:[s.l0.colWithGap(8)],contentContainer:[s.l0.position.relative],buttonContainer:[s.l0.align.start]});function v(e){var n=e.children,t=e.collapsedHeight,s=(0,r.Z)(i.useState(!1),2),p=s[0],v=s[1],Z=(0,m.D)(),g="".concat("ExpandableContent"+Z),b="".concat("ExpandableContent"+Z),C=(0,d.b)({defaultExpanded:!1}),R=C.isExpanded,x=C.toggle,w=(0,a.Z)((function(e){var n=e.height;void 0!==n&&v(n>t)}));return(0,o.BX)(u.G,{css:f.container,children:[(0,o.tZ)(u.G,{css:f.contentContainer,children:(0,o.tZ)(u.G,{id:b,"aria-labelledby":p?g:void 0,css:!R&&p?{height:t,overflow:"hidden",maskImage:"linear-gradient(to top, transparent, black 64px, black)"}:void 0,children:(0,o.tZ)(h,{ref:w,children:n})})}),p?(0,o.tZ)(u.G,{css:f.buttonContainer,children:(0,o.tZ)(c.zx,{outlined:!1,stretch:!1,small:!0,onClick:x,text:"Show ".concat(R?"Less":"More"),iconRight:(0,o.tZ)(l.Z,{rotate:R?180:0}),id:g,"aria-expanded":R,"aria-controls":b})}):null]})}},40570:function(e,n,t){var r=t(74985),o=t(85368),i=t(39541),l=t(82568),a=t(45510),c=t(33137),u=(0,l.X)({containerStretch:[i.l0.rowWithGap(1),i.l0.flex.growAndShrink(1)],containerShrink:i.l0.rowWithGap(1),ctaStretch:[i.l0.borderRadius(8,0,0,8),i.l0.flex.growAndShrink(1)],ctaShrink:i.l0.borderRadius(8,0,0,8),count:i.l0.borderRadius(0,8,8,0)});n.Z=function(e){return(0,r.BX)(o.G,{css:e.stretch?u.containerStretch:u.containerShrink,children:[(0,r.tZ)(a.zx,{colorway:e.colorway,iconLeft:e.icon,stretch:e.stretch,onClick:e.onClick,text:e.text,css:e.stretch?u.ctaStretch:u.ctaShrink}),(0,r.tZ)(a.zx,{colorway:e.colorway,onClick:e.onCountClick,text:(0,c.d)(e.count),css:u.count})]})}},42131:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),o=t(43119),i=t(71440),l=t(7958),a=t(24635);function c(){var e=(0,o.Z)(["\n  query PublicForks(\n    $replId: String!\n    $count: Int!\n    $after: String\n    $search: String\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        publicForkCount\n        releasesForkCount\n        publishedAs\n        publicForks(count: $count, after: $after, search: $search) {\n          items {\n            id\n            ...ReplPostReplCardRepl\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,i.Ps)(c(),l.n);function d(e){return function(e){var n=(0,r.Z)({},u,e);return a.a(s,n)}({variables:e})}},23258:function(e,n,t){t.d(n,{Z:function(){return M},S:function(){return V}});var r=t(57135),o=t(72006),i=t(4405),l=t(96583),a=t(74985),c=t(50959),u=t(43119),s=t(71440);function d(){var e=(0,u.Z)(["\n  fragment PostBodyTextAreaUser on User {\n    id\n    username\n    image\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,u.Z)(["\n  query PostBodyTextAreaUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...PostBodyTextAreaUser\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m=(0,s.Ps)(d()),h=(0,s.Ps)(p(),m);var f=t(94716),v=t(2272),Z=t(11066),g=t.n(Z),b=t(57835),C=t(21371);var R=t(77478),x=t(81962),w=t(9970),y=t(91669),k=t(8023),B=t(32905);function G(e){var n=e.initialValue,t=e.textTriggers,o=(0,c.useState)(n||""),i=o[0],a=o[1],u=(0,c.useRef)(null),s=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,c.useRef)(null),o=(0,v.Z)((0,b.Z)(n),2),i=o[0].suggestions,l=o[1],a=(0,C.Kb)({items:(null===i||void 0===i?void 0:i.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(i),onSelectedItemChange:function(e){var n=e.selectedItem;if(i&&n){var o=r.current;if(o){var l=i.applySuggestion({targetValue:o.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),u=(0,c.useMemo)((function(){if(i&&r.current)return g()(r.current,i.textTrigger.index)}),[i]);return{ref:(0,c.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===i||void 0===i?void 0:i.results,caretCoordinates:u,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;a(t),setTimeout((function(){u.current&&u.current.setSelectionRange(n,n)}))}}),d=s.combobox,p=s.caretCoordinates,m=s.suggestions,h=s.ref,Z=function(e){var n=(0,c.useRef)(null),t=(0,f.Z)(e.onChange),o=(0,f.Z)(e.onError),i=(0,c.useCallback)((function(e){n.current=e}),[]),a=(0,c.useCallback)(function(){var e=(0,r.Z)((function(e){var r,i,a,c,u,s,d,p,m,h,f,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(!(r=n.current))return[2];i=r.value,a=r.selectionStart?r.selectionStart:i.length,c=e.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),u=i.substr(0,a),s=i.substr(a),d=(0,w.Z)(c),u&&d.unshift(u),s&&d.push(s),t.current(d.join("\n")),p=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,y.L0)(e)];case 2:return p=l.sent(),[3,4];case 3:return m=l.sent(),o.current(m),[2];case 4:h=[],l.label=5;case 5:return l.trys.push([5,7,,8]),[4,Promise.all(p.map((function(e){return(0,k.mh)(e,B.N.CommunityPost)})))];case 6:return h=l.sent(),[3,8];case 7:return f=l.sent(),o.current(f),[2];case 8:return n.current?(v=c.reduce((function(n,t,r){var o=e[r].name.replace(/\.[^/.]+$/,""),i=h[r],l=(0,x.Z)(i,Error)?"Error uploading":i.url;return n.replace(t,"![".concat(o,"](").concat(l,")"))}),n.current.value),t.current(v),[2]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,o]),u=(0,c.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&a(n)}),[a]);return{ref:i,handleFiles:a,handlePaste:u}}({onChange:a,onError:function(){}}),G=Z.handleFiles,S=Z.handlePaste,E=Z.ref,P=(0,v.Z)((0,R.Z)((function(e){null!==e&&G(e)})),2)[1],I=(0,c.useCallback)((function(e){u.current=e,h(e),E(e)}),[h,E]),U=(0,c.useCallback)((function(e,n){var t;null===(t=u.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:I,value:i,setValue:a,dropZoneHandlers:P,handlePaste:S,combobox:d,caretCoordinates:p,suggestions:m,setSelectionRange:U}}var S=t(25498),E=t(29838),P=t(97858),I=t(12341),U=t(12379),X=t(39541),T=t(61284),H=t(39137),_=t(85368),D=t(56169),F=_.K.div,W=_.K.li;function V(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(!U.l)throw new Error("Expected apolloClient");return[4,U.l.query({query:h,variables:{query:e,limit:5}})];case 1:return[2,n.sent().data.usernameSearch]}}))}))).apply(this,arguments)}function M(e){var n,t=e.onChange,u=e.initialValue,s=e.autoFocus,d=e.placeholder,p=e.onKeyDown,m=e.onBlur,h=e.onFocus,v=e.userSearch,Z=e.showLabel,g=(0,c.useRef)(u),b=(0,f.Z)(t),C=function(e){var n=e.initialValue,t=e.userSearch,o=void 0===t?V:t,i=G({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,o(e)];case 1:return[2,n.sent().map((function(e){return{icon:(0,a.tZ)(S.Z,{alt:e.username,src:e.image,size:16}),value:e.username}}))]}}))}));return function(n){return e.apply(this,arguments)}}()}});return i}({initialValue:u,userSearch:v}),R=C.setSelectionRange;(0,E.Z)((function(){b.current(C.value)}),[C.value]),(0,c.useEffect)((function(){if(s&&g.current){var e=g.current.length;R(e,e)}}),[s,R]);var x=(0,D.H)();return(0,a.BX)(F,(0,i.Z)((0,o.Z)({css:{position:"relative"}},C.combobox.getComboboxProps()),{children:[(0,a.BX)(_.G,{css:[X.l0.colWithGap(4)],children:[Z?(0,a.tZ)("label",{htmlFor:x("description"),children:(0,a.tZ)(T.xv,{color:"dimmer",variant:"small",children:"Description"})}):null,(0,a.tZ)(H.B,(0,i.Z)((0,o.Z)({autoSize:!0},C.combobox.getInputProps({placeholder:d||"Write something about this post",ref:C.ref,onKeyDown:function(e){C.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),p&&p(e)},onBlur:m,onFocus:h,value:C.value,onChange:function(e){return C.setValue(e.currentTarget.value)},onPaste:C.handlePaste,autoFocus:s})),{css:[X.l0.width("100%"),{minHeight:X.TV.space32,resize:"vertical"}],id:x("description")}))]}),(0,a.tZ)(F,(0,i.Z)((0,o.Z)({},C.combobox.getMenuProps()),{css:[{position:"absolute"},C.caretCoordinates&&{top:C.caretCoordinates.top+C.caretCoordinates.height,left:C.caretCoordinates.left-4}],children:(null===(n=C.suggestions)||void 0===n?void 0:n.length)?(0,a.tZ)(P.Z,{css:{position:"relative",maxWidth:180},children:C.suggestions.map((function(e,n){return(0,a.tZ)(W,(0,i.Z)((0,o.Z)({},C.combobox.getItemProps({item:e,index:n})),{children:(0,a.tZ)(I.Z,{title:e.value,selected:C.combobox.selectedItem===e,highlighted:C.combobox.highlightedIndex===n,icon:e.icon?(0,a.tZ)(_.G,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},36994:function(e,n,t){t.d(n,{EQ:function(){return _},Ex:function(){return T},Sh:function(){return H},Yt:function(){return E},g4:function(){return k},l0:function(){return U},nQ:function(){return G},pl:function(){return I},tE:function(){return B},wb:function(){return P}});var r=t(74985),o=t(50959),i=t(79637),l=t(2757),a=t(85368),c=t(66482),u=t(77712),s=t(55923),d=t(23258),p=t(22642),m=t(1050),h=t(70719),f=t(33814),v=t(62405),Z=t(84815),g=t(54873),b=t(15544),C=t(39541),R=t(3923),x=t(90349),w=t(61284),y=t(45510);function k(e){var n=e.onClick;return(0,r.tZ)(y.zx,{small:!0,onClick:n,outlined:!0,text:"Reply",colorway:"primary",css:[C.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function B(e){var n=e.onClick,t=e.repliesCount,o=e.isExpanded,i="".concat(o?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(y.zx,{small:!0,onClick:n,outlined:!0,text:i,css:[C.l0.color.foregroundDimmer,C.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:o?0:270})})}var G,S=a.K.a;function E(e){var n=e.user,t=e.size,o=void 0===t?32:t;return(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(x.q,{size:o,username:n.username,src:n.image})})})}function P(e){var n=e.user,t=e.action,o=e.timeCreated;return(0,r.BX)(a.G,{css:[C.l0.flex.row,C.l0.align.center,C.l0.flex.wrap,{maxWidth:"100%",gap:C.TV.space4}],children:[(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(S,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(w.xv,{color:"dimmer",children:t}):null,(0,r.tZ)(R.E,{date:o,textColor:"dimmest",textVariant:"small"})]})}function I(e){var n=e.canEdit,t=e.canDelete,l=e.canReport,c=e.canEditSettings,u=e.canHideComment,s=e.canShowComment,d=e.onAction,p=e.className,C=(0,o.useState)(!1),R=C[0],x=C[1],w=[{label:G.CopyLink,icon:(0,r.tZ)(b.Z,{})}];return n&&w.push({label:G.Edit,icon:(0,r.tZ)(m.Z,{})}),l&&w.push({label:G.Report,icon:(0,r.tZ)(h.Z,{})}),c&&w.push({label:G.Settings,icon:(0,r.tZ)(f.Z,{})}),u&&w.push({label:G.Hide,icon:(0,r.tZ)(v.Z,{})}),s&&w.push({label:G.Show,icon:(0,r.tZ)(Z.Z,{})}),t&&w.push({label:G.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),w.length?(0,r.tZ)(a.G,{className:p,css:[{opacity:R?1:0,".is-touch-device &":{opacity:1}}],children:(0,r.tZ)(i.Z,{label:"Comment Actions",onOpenChange:x,items:w,onItemClick:function(e){d(e.label)}})}):null}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment",e.CopyLink="Copy Link"}(G||(G={}));var U=a.K.form,X=o.createContext(void 0);function T(){return o.useContext(X)}var H=X.Provider;function _(e){var n=e.initialValue,t=e.placeholder,i=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,m=e.buttonIcon,h=void 0===m?(0,r.tZ)(p.Z,{}):m,f=e.error,v=(0,o.useState)(!1),Z=v[0],g=v[1],b=(0,o.useState)(n),R=b[0],x=b[1],k=T();return(0,r.BX)(U,{css:[C.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(R)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(R)},initialValue:R,placeholder:t,onChange:x,onFocus:function(){return g(!0)},userSearch:k}),f?(0,r.BX)(a.G,{css:[C.l0.flex.column,C.l0.colWithGap(8)],children:[(0,r.tZ)(w.xv,{css:[C.l0.color.redDefault],multiline:!0,children:f})," ",(0,r.BX)(w.xv,{children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,Z||!c?(0,r.BX)(a.G,{css:[C.l0.rowWithGap(8),C.l0.justify.end],children:[(0,r.tZ)(y.zx,{text:"Cancel",onClick:function(e){g(!1),i&&i(e)}}),(0,r.tZ)(y.zx,{type:"submit",text:s,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!R})]}):null]})}},80671:function(e,n,t){t.d(n,{G:function(){return Le},Z:function(){return Ne}});var r=t(57389),o=t(72006),i=t(4405),l=t(2272),a=t(9970),c=t(74985),u=t(50959),s=t(43312),d=t(62946),p=t(51631),m=t(37459),h=t(625),f=t(57135),v=t(96583),Z=t(19075),g=t(39541),b=t(90171),C=t(85368),R=t(61284),x=t(71417),w=t(51034),y=t(13233),k=t(2757),B=t(35458);function G(e){var n=e.count;return n>0?(0,c.BX)(C.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,c.tZ)(R.xv,{children:n}),(0,c.tZ)(R.xv,{color:"dimmer",children:(0,k.Z)("comment",n)})]}):(0,c.tZ)(R.xv,{color:"dimmer",multiline:!0,children:"No comments yet"})}function S(e){var n,t=e.repl,r=(0,y.Z)(),a=r.showConfirm,u=r.showError,s=(0,l.Z)((0,w.k2)({onError:function(e){return u(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&a("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):u(t.message)}}),1),d=s[0],p=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,c.BX)(C.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.start],children:[(0,c.tZ)(C.G,{css:[g.l0.flex.growAndShrink(1)],children:p?(0,c.tZ)(G,{count:t.commentCount}):(0,c.tZ)(R.xv,{color:"dimmer",multiline:!0,children:"Adding comments has been turned off for this Repl."})}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)?(0,c.BX)(C.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,c.tZ)(R.xv,{children:"Allow comments"}),(0,c.tZ)(B.Z,{isOn:p,onChange:function(){return d({variables:{input:{replId:t.id,enabled:!p}},optimisticResponse:{__typename:"RootMutationType",setReplCommentSettings:(0,i.Z)((0,o.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!p}})}})}})]}):null]})}var E=t(23258),P=t(36994),I=t(32104);function U(e){var n,t,l,s=e.replId,d=(0,b.useRouter)().query,p=(0,Z.ex)({ssr:!1,variables:{replId:s,after:d.after?d.after.toString():void 0,count:25}}),m=p.data,h=p.loading,w=p.fetchMore,y=p.refetch,k="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)?m.repl:null,B=!(!k||"User"!==(null===(n=k.owner)||void 0===n?void 0:n.__typename))&&(null===k||void 0===k?void 0:k.owner.isBlockingCurrentUser),G=null===m||void 0===m?void 0:m.currentUser,U=null===k||void 0===k?void 0:k.comments.pageInfo,X=(0,u.useMemo)((function(){return k&&G?function(e){var n,t=e.repl,o=e.currentUser,i="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,r.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(i[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(i[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){i[e.username]=e})),o&&delete i[o.username],Object.values(i)}({repl:k,currentUser:G}):[]}),[k,G]),T=!(null===k||void 0===k?void 0:k.commentSettings)||k.commentSettings.enabled,H=(l=X,function(){var e=(0,f.Z)((function(e){var n,t;return(0,v.__generator)(this,(function(r){switch(r.label){case 0:return n=null===e||void 0===e?void 0:e.toLowerCase(),(t=l.filter((function(e){return!n||e.username.toLowerCase().includes(n)}))).length<5&&e?[4,(0,E.S)(e)]:[3,2];case 1:r.sent().forEach((function(e){t.some((function(n){return n.username===e.username}))||t.push(e)})),r.label=2;case 2:return[2,t.slice(0,5)]}}))}));return function(n){return e.apply(this,arguments)}}());return(0,c.BX)(C.G,{css:[g.l0.colWithGap(16)],children:[h?(0,c.BX)(C.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,c.tZ)(I.Z,{}),(0,c.tZ)(R.xv,{children:"Loading comments..."})]}):null,k&&!B?(0,c.BX)(c.HY,{children:[(0,c.BX)(P.Sh,{value:H,children:[(0,c.tZ)(S,{repl:k}),G&&T?(0,c.tZ)(x.H,{onComment:function(){return y()},replId:k.id,placeholder:k?"Say something about ".concat(k.title):""}):null,null===(t=k.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,c.tZ)(x.x,{commentsEnabled:T,comment:e,onReply:function(){return y()},onDelete:function(){return y()}},e.id)}))]}),(null===U||void 0===U?void 0:U.nextCursor)&&k?(0,c.tZ)(C.G,{children:(0,c.tZ)("a",{href:k.url+"?after="+U.nextCursor,onClick:function(e){e.preventDefault(),h||w({variables:{after:U.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,i.Z)((0,o.Z)({},r),{repl:(0,i.Z)((0,o.Z)({},l),{comments:(0,i.Z)((0,o.Z)({},l.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(l.comments.items))})})}):e}})},children:h?"Loading...":"Load more comments"})}):null]}):null,k&&B?(0,c.BX)(C.G,{css:[g.l0.colWithGap(24),g.l0.align.center,g.l0.textAlign.center],children:[(0,c.tZ)(R.xv,{variant:"subheadBig",multiline:!0,children:"You\u2019re blocked"}),(0,c.BX)(R.xv,{children:["You can\u2019t follow, comment or see"," ",k.owner&&"User"===k.owner.__typename?k.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var X=t(93762),T=t(40570),H=t(49142),_=t(43743),D=t(82893),F=t.n(D),W=t(64450),V=t(51523),A=t(17755),M=t(77712),L=t(55923),O=t(38822),$=t(50946),z=t(33137),N=t(77551),q=t(82568),Q=t(13455),Y=C.K.a,K=function(){return(0,c.tZ)(R.xv,{color:"dimmest",children:"\xb7"})},j=(0,q.X)({container:g.l0.colWithGap(12),ownerWrapper:[g.l0.colWithGap(8),(0,r.Z)({},g.BC.min("tabletMin"),[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center])],owner:[g.l0.flex.row,g.l0.align.center,g.l0.flex.wrap,{gap:g.TV.space8}],username:g.l0.color.foregroundDefault,info:[g.l0.flex.row,g.l0.flex.wrap,g.l0.align.center,g.l0.pb(4),{gap:4}],forkedUser:[g.l0.rowWithGap(2),g.l0.display.inlineFlex],forkedUserLink:g.l0.color.foregroundDefault,tags:[g.l0.flex.wrap,g.l0.flex.row,g.l0.pt(8),{gap:6}],li:{listStyle:"none"},pillLink:{padding:4,borderRadius:8,color:g.TV.foregroundDimmer,":hover":{color:g.TV.foregroundDefault}}});function J(e){var n,t,r,l,a,u,s,d=e.repl,p=e.currentUser,m=d.owner,h=d.lastPublishedAt||(null===(n=d.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated)||d.timeCreated,f=m&&m.id===(null===p||void 0===p?void 0:p.id);return(0,c.BX)(C.G,{css:j.container,children:[(0,c.tZ)(C.G,{css:j.ownerWrapper,children:m?(0,c.tZ)(c.HY,{children:(0,c.BX)(C.G,{css:j.owner,dataCy:"cover-page-user",children:[(0,c.tZ)(L.Z,{inline:!0,username:m.username,children:(0,c.tZ)(M.ZP,{user:m,children:(0,c.tZ)(Y,{css:j.username,children:(0,c.tZ)(A.n,{username:m.username,src:(null===m||void 0===m?void 0:m.image)||null,small:!0})})})}),(0,c.tZ)(R.xv,{variant:"small",children:"User"===m.__typename&&m.followerCount>0?"".concat((0,z.d)(m.followerCount)," ").concat((0,k.Z)("follower",m.followerCount)):null}),!f&&(0,c.tZ)(N.Z,{subtle:!0,small:!0,user:m})]})}):(0,c.tZ)(A.n,{small:!0,src:null,username:"[deleted]"})}),(0,c.BX)(C.G,{children:[(0,c.BX)(C.G,{css:j.info,children:[h?(0,c.tZ)(R.xv,{color:"dimmer",children:new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}):null,d.runCount>0?(0,c.BX)(c.HY,{children:[(0,c.tZ)(K,{}),(0,c.BX)(R.xv,{color:"dimmer",children:[(0,z.d)(d.runCount)," ",(0,k.Z)("run",d.runCount)]})]}):null,(null===(r=d.source)||void 0===r||null===(l=r.deployment)||void 0===l||null===(a=l.repl)||void 0===a?void 0:a.owner)&&!(null===(u=d.origin)||void 0===u?void 0:u.owner)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(K,{}),(0,c.BX)(C.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,c.tZ)(R.xv,{color:"dimmer",children:"Made with "}),(0,c.tZ)(F(),(0,i.Z)((0,o.Z)({},(0,V.aq)(d.source.deployment.repl)),{passHref:!0,children:(0,c.tZ)(Y,{children:d.source.deployment.repl.templateLabel})}))]})]}):null,(null===(s=d.origin)||void 0===s?void 0:s.owner)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(K,{}),(0,c.BX)(R.xv,{color:"dimmer",children:["Forked from"," ",(0,c.BX)(C.G,{css:j.forkedUser,children:[(0,c.tZ)(M.ZP,{user:d.origin.owner,css:j.forkedUserLink,children:(0,c.tZ)("a",{children:d.origin.owner.username})}),(0,c.tZ)(R.xv,{children:"/"}),(0,c.tZ)(F(),(0,i.Z)((0,o.Z)({},(0,V.aq)(d.origin)),{css:j.forkedUserLink,children:(0,c.tZ)("a",{children:d.origin.title})}))]})]})]}):null]}),d.description?(0,c.tZ)(Q.Z,{collapsedHeight:116,children:(0,c.tZ)(W.Z,{children:d.description})}):null,d.tags.length?(0,c.tZ)(C.G,{children:(0,c.tZ)(C.G,{tag:"ul","aria-label":"Tags",css:j.tags,children:d.tags.map((function(e){var n=(0,O.M6)(e.id);return(0,c.tZ)("li",{css:j.li,children:(0,c.tZ)($.P,{text:"#"+e.id,css:j.pillLink,href:n.href,as:n.as})},e.id)}))})}):null]})]})}var ee,ne=t(1966),te=t(6933),re=t(62376),oe=t(63128),ie=t(2041),le=t(45510),ae=t(86302),ce=t(33280),ue=t(66539),se=t(39137),de=t(90273),pe=t(84607),me=t(8622),he=t(32973),fe=t(88541),ve=t(73853),Ze=t(34338),ge=t(96966),be=t(77511),Ce=t(53212),Re=t(82655),xe=t(18171),we=t(48506),ye=t(8885),ke=t(67121),Be=t(87138),Ge=t(80336),Se=t(1050),Ee=t(1809),Pe=t(49287),Ie=t(42131),Ue=t(23142),Xe=t(29203),Te=(0,s.F4)("\n  0% { opacity: 1; }\n  50% { opacity: 0.7; }\n  100% { opacity: 1; }\n"),He=(0,s.F4)("\n  0% { transform: rotate(0.3deg); }\n  50% { transform: rotate(-0.3deg); }\n  100% { transform: rotate(0.3deg); }\n"),_e={transparent:(0,s.iv)([g.l0.width(32),{borderColor:"transparent"}]),squareButton:(0,s.iv)([g.l0.width(32)]),loadingBlock:(0,s.iv)([g.l0.borderRadius(8),{animation:Te+" 2s infinite"}]),jiggle:(0,s.iv)({animation:He+" 0.2s infinite linear"}),cross:(0,s.iv)([g.l0.backgroundColor.redDefault,g.l0.borderRadius("full"),g.l0.position.absolute,g.l0.width(20),g.l0.height(20),g.l0.center,g.l0.top(-10),g.l0.right(-10),g.l0.cursor.pointer])};!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.ForkModal="ForkModal",e.AddExampleModal="AddExampleModal"}(ee||(ee={}));var De,Fe=(0,d.cn)(null),We=(0,q.X)({buttons:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.width("100%"),g.l0.pt(16),g.l0.pb(4),g.l0.px(8),g.l0.overflowX("auto"),{scrollbarWidth:"none","&::-webkit-scrollbar":{height:0}}],templateWrapper:[g.l0.pt(16),g.l0.pb(4),g.l0.overflowX("auto"),(De={flexDirection:"row",gap:8},(0,r.Z)(De,g.BC.min("tabletMax"),{flexDirection:"column",gap:12}),(0,r.Z)(De,"scrollbarWidth","none"),(0,r.Z)(De,"&::-webkit-scrollbar",{height:0}),De)],templateButton:(0,r.Z)({paddingLeft:8,flexGrow:0},g.BC.min("tabletMax"),{flexGrow:1,paddingRight:16}),buttonsForTemplate:[g.l0.rowWithGap(8),g.l0.pr(16),g.l0.align.center,(0,r.Z)({},g.BC.min("tabletMax"),[g.l0.pl(8)])],iconButtons:[g.l0.flex.row,{marginLeft:-2,gap:g.TV.space8}]});function Ve(e){var n,t=e.repl,r=e.currentUser,a=e.runRepl,u=e.stopRepl,s=e.runState,m=e.connectionState,f=e.showUrlOutput,v=e.isFileTreeOpen,Z=e.setIsFileTreeOpen,g=(0,l.Z)((0,d.KO)(Fe),2),R=g[0],x=g[1],w=(0,l.Z)((0,_.Z)(),2),y=w[0],k=w[1].loading,B=(0,fe.P5)({controlName:"flag-repl-analytics",logFlagToAnalytics:!1}),G=(0,c.tZ)(X.DZ,{runCount:0,runState:s,connectionState:m,publishedAs:t.publishedAs,run:a,stop:u}),S=t.currentUserPermissions.containerWrite,E=t.publishedAs===p.O2.Template,P=S&&B&&t.analyticsUrl?(0,c.tZ)(ue.u,{tooltip:"Repl Analytics",children:(0,c.tZ)(ae.Z,{iconLeft:(0,c.tZ)(de.Z,{}),stretch:!0,href:t.analyticsUrl,text:"",css:_e.squareButton})}):null,I=f?(0,c.tZ)(ue.u,{tooltip:"Open in new tab",children:(0,c.tZ)(ae.Z,{iconLeft:(0,c.tZ)(he.Z,{}),text:"",href:t.prodUrl,target:"_blank",onClick:function(){return(0,h.j)(h.U3.COVER_PAGE_NEW_TAB_OPENED)},css:_e.squareButton})}):null,U=S?(0,c.tZ)(ue.u,{tooltip:v?"Hide code":"Show code",children:(0,c.tZ)(le.zx,{iconLeft:(0,c.tZ)(Ee.Z,{}),text:"",onClick:function(){return Z((function(e){return!e}))},css:_e.squareButton})}):(0,c.tZ)(le.zx,{text:v?"Hide code":"Show code",onClick:function(){return Z((function(e){return!e}))}}),D=E||!S,F=E?{text:k?"Forking...":"Use Template",icon:(0,c.tZ)(me.Z,{}),count:t.releasesForkCount,stretch:D}:{text:k?"Forking...":"Fork",icon:(0,c.tZ)(pe.Z,{}),count:t.publicForkCount,stretch:D},W=(0,c.tZ)(T.Z,(0,i.Z)((0,o.Z)({},F),{onClick:function(){if(!r)return x(ee.AuthPrompt),void(0,h.j)(h.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork",authFormPlacement:"modal"});k||x(ee.ForkModal)},icon:(0,c.tZ)(pe.Z,{}),colorway:D?"primary":void 0,onCountClick:function(){return x(ee.ForksModal)}})),V=(0,c.tZ)(ie.u,{maxWidth:512,isOpen:"ForksModal"===R,onRequestClose:function(){return x(null)},children:(0,c.tZ)(ne.Z,{replId:t.id})}),A=(0,c.tZ)(ie.u,{isOpen:R===ee.ForkModal,onRequestClose:function(){return x(null)},children:(0,c.tZ)(H.Z,{onFork:function(e,n,r,o){var i,l;y({originId:t.id,teamId:e,title:n,description:r,isPrivate:o,replReleaseId:(null===(i=t.deployment)||void 0===i||null===(l=i.activeRelease)||void 0===l?void 0:l.id)||void 0,forkToPersonal:!e,trackingData:{forkSource:"coverPage",isApp:t.publishedAs===p.O2.App,isTemplate:t.publishedAs===p.O2.Template}})},initialTitle:t.title,initialDescription:null!==(n=t.description)&&void 0!==n?n:"",initialPrivacy:!1,hideModal:function(){return x(null)},teamContext:null===r||void 0===r?void 0:r.username,template:t.publishedAs===p.O2.Template})}),M=(0,b.useRouter)(),L=!(0,be.Vg)(M)?(0,c.tZ)(ge.ZP,{repl:t,currentUser:r,surface:!1}):null,O=S?(0,c.BX)(c.HY,{children:[V,A]}):(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ue.Z,{isOpen:R===ee.AuthPrompt,onClose:function(){return x(null)},loginTitle:"Log in to fork this Repl",signupTitle:"Sign up to fork this Repl",description:"Create an account to fork this Repl and add it to your account.",textOnSuccess:"Success!",showAnimationOnSuccess:!0,onSuccess:function(){x(ee.ForkModal)},onFailure:function(){},trackSource:"fork"}),V,A]}),$=(0,c.tZ)(Ce.Z,{repl:t,currentUser:r,source:"coverPage"});return D?(0,c.BX)(c.HY,{children:[(0,c.BX)(C.G,{css:We.templateWrapper,children:[(0,c.tZ)(C.G,{css:We.templateButton,children:W}),(0,c.BX)(C.G,{css:We.buttonsForTemplate,children:[G,L,U,(0,c.BX)(C.G,{css:We.iconButtons,children:[P,I,$]})]})]}),O]}):(0,c.BX)(c.HY,{children:[(0,c.BX)(C.G,{css:We.buttons,children:[G,W,L,U,(0,c.BX)(C.G,{css:We.iconButtons,children:[P,I,$]})]}),O]})}function Ae(e){var n=e.className,t=e.children;return(0,c.tZ)(C.G,{css:Oe.section,className:n,children:t})}var Me=(0,q.X)({container:[g.l0.flex.growAndShrink(1),(0,r.Z)({},(0,Ze.et)("tabletMax"),{height:"calc(100vh - 60px)",flexDirection:"row"})],viewer:[g.l0.p(12),(0,r.Z)({height:"calc(57vw + 51px)",margin:"16px 16px 0px",border:"1px solid "+g.TV.outlineDimmest,borderRadius:8,overflow:"hidden","> *":{height:"100%"}},(0,Ze.et)("tabletMax"),{flex:1,height:"100%",margin:0,border:"none",borderRadius:0})],viewerBlock:[_e.loadingBlock,g.l0.width("100%"),g.l0.height("100%")],sidebar:[(0,r.Z)({height:"100%"},(0,Ze.et)("tabletMax"),{width:400,borderLeft:"1px solid "+g.TV.outlineDimmest})],column:[g.l0.align.center,g.l0.rowWithGap(8)],block1:[_e.loadingBlock,g.l0.width(32),g.l0.height(32),g.l0.borderRadius("full")],block2:[_e.loadingBlock,g.l0.height(30)],block3:[_e.loadingBlock,g.l0.height(80)],comments:g.l0.flex.growAndShrink(1),block4:[_e.loadingBlock,g.l0.height("100%")]});function Le(e){var n=e.embedded;return(0,c.BX)(C.G,{css:Me.container,children:[(0,c.tZ)(C.G,{css:Me.viewer,children:(0,c.tZ)(oe.T,{elevated:!0,css:Me.viewerBlock})}),(0,c.BX)(C.G,{css:[Oe.sidebar],children:[(0,c.BX)(Ae,{children:[(0,c.BX)(C.G,{css:Me.column,children:[(0,c.tZ)(oe.T,{elevated:!0,css:Me.block1}),(0,c.tZ)(R.xv,{color:"dimmest",variant:"subheadBig",children:"Loading..."})]}),(0,c.tZ)(oe.T,{elevated:!0,css:Me.block2}),(0,c.tZ)(oe.T,{elevated:!0,css:Me.block3})]}),n?null:(0,c.tZ)(ce.R,{}),(0,c.tZ)(Ae,{css:Me.comments,children:(0,c.tZ)(oe.T,{elevated:!0,css:Me.block4})})]})]})}var Oe=(0,q.X)({page:[g.l0.flex.growAndShrink(1),(0,r.Z)({},(0,Ze.et)("tabletMax"),{height:"calc(100vh - 60px)",flexDirection:"row"})],viewer:[g.l0.p(8),(0,r.Z)({height:"calc(57vw + 51px)","> *":{height:"100%"}," iframe":{borderRadius:0}},(0,Ze.et)("tabletMax"),{flex:1,height:"100%",margin:0,border:"none",borderRadius:0,"& .xterm-viewport":{borderRadius:"0 !important"}})],output:[g.l0.borderRadius(4),g.l0.border({color:g.TV.outlineDimmest}),g.l0.overflow("hidden")],sidebar:(0,r.Z)({},(0,Ze.et)("tabletMax"),{height:"100%",overflow:"auto",width:400}),section:[g.l0.p(8),g.l0.pb(16),g.l0.colWithGap(8)],dividerEmbedded:{width:"calc(100% - 12px)",alignSelf:"flex-end"},examples:[g.l0.colWithGap(12)],examplesHeader:[g.l0.flex.row,g.l0.justify.spaceBetween],examplesButtons:[g.l0.rowWithGap(8)],examplesTitle:[g.l0.colWithGap(4)],addExampleInput:[g.l0.flex.growAndShrink(1)],addExampleModal:[g.l0.p(4),g.l0.colWithGap(16)],addExampleForks:[g.l0.colWithGap(16)]});function $e(e){var n,t,r=e.repl,s=e.addExample,d=(0,l.Z)(u.useState(""),2),p=d[0],m=d[1],h=(0,Ie.Z)({replId:r.id,count:10,search:p}),f=h.data,v=h.loading,Z=h.fetchMore,g="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)?f.repl:null,b=(null!==(t=null===g||void 0===g?void 0:g.publicForks.items)&&void 0!==t?t:[]).filter((function(e){return!r.examples.some((function(n){return n.id===e.id}))}));return(0,c.BX)(C.G,{css:Oe.addExampleModal,children:[(0,c.tZ)(R.xv,{variant:"subheadBig",children:"Add a Repl as example from forks"}),(0,c.tZ)(se.II,{css:Oe.addExampleInput,value:p,onChange:function(e){return m(e.target.value)},placeholder:"Search for a Repl that uses this template"}),b.length>0?(0,c.tZ)(C.G,{css:Oe.addExampleForks,children:b.map((function(e){return(0,c.tZ)(re.ZP,{repl:e,showOwner:!0,onReplClick:function(n){n.preventDefault(),confirm("Add Repl ".concat(e.title," as an example repl?"))&&s(e.id)}},e.id)}))}):null,v?(0,c.tZ)(I.Z,{}):null,(null===g||void 0===g||null===(n=g.publicForks)||void 0===n?void 0:n.pageInfo.nextCursor)?(0,c.tZ)(le.zx,{text:v?"Loading...":"Load more",onClick:function(){return Z({variables:{after:g.publicForks.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,i.Z)((0,o.Z)({},r),{repl:(0,i.Z)((0,o.Z)({},l),{publicForks:(0,i.Z)((0,o.Z)({},l.publicForks),{items:(0,a.Z)(t.publicForks.items).concat((0,a.Z)(l.publicForks.items))})})}):e}})}}):null,v||0!==b.length?null:(0,c.tZ)(R.xv,{color:"dimmer",children:"No Repls to show!"})]})}function ze(e){var n=e.repl,t=n.currentUserPermissions.containerWrite,r=(0,l.Z)((0,d.KO)(Fe),2),o=r[0],i=r[1],s=(0,l.Z)(u.useState(!1),2),p=s[0],h=s[1],f=(0,l.Z)(u.useState(n.examples),2),v=f[0],Z=f[1],g=(0,y.Z)().showError,b=(0,l.Z)((0,m.Cn)({onCompleted:function(e){var n,t=e.setReplExamples;"Repl"===t.__typename?Z(t.examples):(null===(n=t.__typename)||void 0===n?void 0:n.endsWith("Error"))&&"message"in t&&g(t.message)},onError:function(e){g(e.message)}}),2),x=b[0],w=b[1];return u.useEffect((function(){0===v.length&&h(!1)}),[v.length]),(0,c.BX)(C.G,{css:Oe.examples,children:[(0,c.BX)(C.G,{css:Oe.examplesTitle,children:[(0,c.BX)(C.G,{css:Oe.examplesHeader,children:[(0,c.tZ)(R.xv,{variant:"subheadBig",children:"Examples"}),t?(0,c.BX)(C.G,{css:Oe.examplesButtons,children:[v.length>0?(0,c.tZ)(le.zx,{small:!0,iconLeft:(0,c.tZ)(Se.Z,{}),text:p?"Done":"Edit",colorway:p?"primary":void 0,onClick:function(){return h(!p)}}):null,(0,c.tZ)(le.zx,{small:!0,iconLeft:(0,c.tZ)(me.Z,{}),text:"",onClick:function(){return i(ee.AddExampleModal)}})]}):null]}),(0,c.tZ)(R.xv,{color:"dimmest",multiline:!0,children:"Example Repls of what people can make from this template"})]}),v.map((function(e){return(0,c.BX)(C.G,{css:p?[_e.jiggle]:[],children:[(0,c.tZ)(re.ZP,{repl:e,showOwner:!0,onReplClick:function(e){p&&e.preventDefault()}}),p?(0,c.tZ)(C.G,{tag:"button",alt:"delete",css:[_e.cross],onClick:function(){w.loading||confirm("Delete example ".concat(e.title,"?"))&&x({variables:{input:{replId:n.id,exampleReplIds:v.filter((function(n){return n.id!==e.id})).map((function(e){return e.id}))}}})},children:(0,c.tZ)(Ge.Z,{})}):null]},e.id)})),(0,c.tZ)(ie.u,{isOpen:o===ee.AddExampleModal,onRequestClose:function(){i(null)},children:(0,c.tZ)($e,{repl:n,addExample:function(e){x({variables:{input:{replId:n.id,exampleReplIds:(0,a.Z)(v.map((function(e){return e.id}))).concat([e])}}})}})})]})}function Ne(e){var n=e.repl,t=e.currentUser,r=e.embedded,o=(0,Re.Z)({enableDeeplinks:!0,repl:n,currentUser:t}),i=o.openFile,a=o.viewState,s=o.fs,d=o.dotReplit,m=o.runRepl,h=o.stopRepl,f=o.runState,v=o.bsodId,Z=o.isFileTreeOpen,b=o.setIsFileTreeOpen,R=o.showUrlOutput,x=o.nonBsodUnrecoverableError,w=o.connectionState,y=(0,xe.Z)((function(){return{id:n.id,slug:n.slug,language:n.language}}),[n.id,n.language,n.slug]),k=(0,fe.P5)({controlName:"flag-template-examples",logFlagToAnalytics:!1}),B=n.currentUserPermissions.containerWrite,G=n.publishedAs===p.O2.Template,S="code"===(null===a||void 0===a?void 0:a.type)&&a.deeplink,E=(0,l.Z)(u.useState(S?S.path:null),2),P=E[0],I=E[1];return u.useEffect((function(){I(S?S.path:null)}),[S,null===a||void 0===a?void 0:a.type]),x===ke.G.NotAllowed?(0,c.tZ)(we.Z.Provider,{value:y,children:(0,c.tZ)(Be.Z,{isOpen:!0})}):(0,c.BX)(C.G,{css:Oe.page,children:[(0,c.tZ)(C.G,{css:Oe.viewer,children:(0,c.tZ)(we.Z.Provider,{value:y,children:(0,c.tZ)(Xe.S2,{children:v?(0,c.tZ)(ye.Z,{}):(0,c.tZ)(oe.T,{elevated:!0,css:Oe.output,children:(0,c.tZ)(X.y6,{repl:n,runRepl:m,viewState:a,connectionState:w,activePath:P,isFileTreeOpen:Z,setIsFileTreeOpen:b,openFile:i,fs:s,dotReplit:d})})})})}),(0,c.BX)(C.G,{css:[Oe.sidebar],children:[(0,c.tZ)(Ve,{repl:n,currentUser:t,runRepl:m,stopRepl:h,runState:f,connectionState:w,showUrlOutput:R,isFileTreeOpen:Z,setIsFileTreeOpen:b}),(0,c.BX)(Ae,{children:[(0,c.tZ)(te.Z,{repl:n,iconEditable:n.currentUserPermissions.changeIconUrl,hideActions:!0,small:!0,currentUser:t}),(0,c.tZ)(J,{repl:n,currentUser:t})]}),(0,c.tZ)(ce.R,{css:r&&Oe.dividerEmbedded}),(null===t||void 0===t?void 0:t.isAdmin)&&window.location.search.includes("debug=1")?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ae,{children:(0,c.tZ)(C.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:(0,c.tZ)(Pe.Z,{showFlag:!0,replId:n.id})})}),(0,c.tZ)(ce.R,{css:r&&Oe.dividerEmbedded})]}):null,k&&G&&(n.examples.length>0||B)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ae,{children:(0,c.tZ)(ze,{repl:n})}),(0,c.tZ)(ce.R,{})]}):null,(0,c.tZ)(Ae,{children:(0,c.tZ)(ve.Z,{replId:n.id})}),(0,c.tZ)(ce.R,{css:r&&Oe.dividerEmbedded}),(0,c.tZ)(Ae,{children:(0,c.tZ)(U,{replId:n.id})})]})]})}},64450:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(74985),o=(t(50959),t(47900));function i(e){var n=e.children,t=e.className,i=e.useRemarkGfm;return(0,r.tZ)(o.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,useRemarkGfm:i,children:n})}},1966:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(72006),o=t(4405),i=t(9970),l=t(74985),a=(t(50959),t(61284)),c=t(85368),u=t(39541),s=t(45510),d=t(2757),p=t(62376),m=t(63128),h=t(42131),f=t(51631);function v(e){var n=e.replId,t=(0,h.Z)({replId:n,count:10}),v=t.data,Z=t.fetchMore,g=t.loading,b="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null;if(!b)return(0,l.tZ)(c.G,{css:[u.l0.colWithGap(8)],children:(0,l.tZ)(c.G,{children:g?(0,l.tZ)(a.xv,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null})});var C=b.publishedAs===f.O2.Template,R=b.publicForks,x=C?b.releasesForkCount:b.publicForkCount,w=R.items.length||0;return(0,l.BX)(c.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(c.G,{children:[null!==x?(0,l.BX)(c.G,{css:[u.l0.colWithGap(12)],children:[(0,l.BX)(c.G,{css:[u.l0.display.block],children:[(0,l.tZ)(a.xv,{variant:"subheadDefault",children:x})," ",(0,l.BX)(a.xv,{color:"dimmest",variant:"subheadDefault",children:[(0,d.Z)("forks",x),x!==w?" total":null]})]}),x>0&&w>0?(0,l.tZ)(a.xv,{variant:"subheadBig",children:"Public forks"}):null,x>0&&0===w?(0,l.tZ)(a.xv,{variant:"subheadBig",children:"No public forks"}):null]}):null,g?(0,l.tZ)(a.xv,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null]}),(0,l.BX)(c.G,{css:[u.l0.flex.growAndShrink(1),u.l0.colWithGap(24)],children:[(0,l.tZ)(c.G,{css:[{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:u.TV.space16,gridAutoFlow:"dense"}],children:R?R.items.map((function(e){return(0,l.tZ)(m.T,{background:"default",css:[u.l0.borderRadius(8)],children:(0,l.tZ)(p.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===R||void 0===R?void 0:R.pageInfo.nextCursor)?(0,l.tZ)(s.zx,{disabled:g,text:g?"Loading...":"Load more",onClick:function(){g||Z({variables:{after:R.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,o.Z)((0,r.Z)({},l),{repl:(0,o.Z)((0,r.Z)({},a),{publicForks:(0,o.Z)((0,r.Z)({},a.publicForks),{items:(0,i.Z)(t.publicForks.items).concat((0,i.Z)(a.publicForks.items))})})}):e}})}}):null]})]})}},66578:function(e,n,t){t.d(n,{P9:function(){return b},Qp:function(){return w},cT:function(){return k},cq:function(){return E},g:function(){return G},kz:function(){return I},oY:function(){return X},pn:function(){return H},xB:function(){return R}});var r=t(72006),o=t(43119),i=t(71440),l=t(3839),a=t(50216);function c(){var e=(0,o.Z)(["\n  fragment ReplViewCommentsUser on User {\n    id\n    username\n    image\n    fullName\n    isBlockingCurrentUser\n    ...UserLinkUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,o.Z)(["\n  fragment ReplViewCommentsReplComment on ReplComment {\n    id\n    body\n    repl {\n      id\n      url\n    }\n    timeCreated\n    currentUserPermissions {\n      id\n      edit\n      delete\n      canHideComment\n      report\n    }\n    user {\n      id\n      ...ReplViewCommentsUser\n    }\n    post {\n      id\n      title\n      canPin\n      canHide\n      canChangeBoard\n      canReport\n      hasReported\n    }\n    isHidden\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,o.Z)(["\n  fragment ReplViewCommentsReplCommentThread on ReplComment {\n    id\n    ...ReplViewCommentsReplComment\n    replies {\n      id\n      ...ReplViewCommentsReplComment\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,o.Z)(["\n  mutation ReplViewCreateReplComment($input: CreateReplCommentInput!) {\n    createReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,o.Z)(["\n  mutation ReplViewCreateReplCommentReply(\n    $input: CreateReplCommentReplyInput!\n  ) {\n    createReplCommentReply(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,o.Z)(["\n  mutation ReplViewCommentsUpdateReplComment($input: UpdateReplCommentInput!) {\n    updateReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        body\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return m=function(){return e},e}function h(){var e=(0,o.Z)(["\n  mutation ReplViewCommentsDeleteReplComment($id: Int!) {\n    deleteReplComment(id: $id) {\n      ... on ReplComment {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=(0,o.Z)(["\n  mutation ReplViewCommentsUpdateReplPost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        title\n      }\n    }\n  }\n"]);return f=function(){return e},e}function v(){var e=(0,o.Z)(["\n  mutation ToggleHiddenComment($commentId: Int!, $isHidden: Boolean!) {\n    toggleHiddenComment(commentId: $commentId, isHidden: $isHidden) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function Z(){var e=(0,o.Z)(["\n  mutation ReportReplComment($commentId: Int!, $reason: String!) {\n    reportReplComment(replCommentId: $commentId, reason: $reason) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoardReport {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var g={},b=(0,i.Ps)(c(),l._),C=(0,i.Ps)(u(),b),R=(0,i.Ps)(s(),C),x=(0,i.Ps)(d(),C);function w(e){var n=(0,r.Z)({},g,e);return a.D(x,n)}var y=(0,i.Ps)(p(),C);function k(e){var n=(0,r.Z)({},g,e);return a.D(y,n)}var B=(0,i.Ps)(m());function G(e){var n=(0,r.Z)({},g,e);return a.D(B,n)}var S=(0,i.Ps)(h());function E(e){var n=(0,r.Z)({},g,e);return a.D(S,n)}var P=(0,i.Ps)(f());function I(e){var n=(0,r.Z)({},g,e);return a.D(P,n)}var U=(0,i.Ps)(v(),C);function X(e){var n=(0,r.Z)({},g,e);return a.D(U,n)}var T=(0,i.Ps)(Z());function H(e){var n=(0,r.Z)({},g,e);return a.D(T,n)}},71417:function(e,n,t){t.d(n,{x:function(){return oe},H:function(){return J}});var r=t(72006),o=t(4405),i=t(2272),l=t(74985),a=t(48306),c=t.n(a),u=t(50959),s=t(66578),d=t(63837),p=t(13233),m=t(64450),h=t(76357),f=t(23258),v=t(56169),Z=t(43119),g=t(71440),b=t(24635),C=t(50216);function R(){var e=(0,Z.Z)(["\n  fragment ReplPostSettingsPost on Post {\n    id\n    isAnnouncement\n    isPinned\n    isLocked\n    isHidden\n    board {\n      id\n      name\n    }\n  }\n"]);return R=function(){return e},e}function x(){var e=(0,Z.Z)(["\n  query ReplPostSettings($postId: Int!) {\n    boards {\n      id\n      name\n    }\n    post(id: $postId) {\n      id\n      canPin\n      canHide\n      canChangeBoard\n      board {\n        id\n        name\n      }\n      ...ReplPostSettingsPost\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function w(){var e=(0,Z.Z)(["\n  mutation ReplPostSettingsUpdatePost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        ...ReplPostSettingsPost\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}var y={},k=(0,g.Ps)(R()),B=(0,g.Ps)(x(),k);var G=(0,g.Ps)(w(),k);var S=t(39541),E=t(85368),P=t(61284),I=t(34938),U=t(31854),X=E.K.label;function T(e){var n=e.children;return(0,l.tZ)(E.G,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:n})}function H(e){var n,t=e.postId,o=function(e){m.loading||h&&p({variables:{input:(0,r.Z)({id:h.id},e)}})},a=(0,v.H)(),c=function(e){var n=(0,r.Z)({},y,e);return b.a(B,n)}({variables:{postId:t}}),u=c.data,s=c.loading,d=(0,i.Z)(function(e){var n=(0,r.Z)({},y,e);return C.D(G,n)}(),2),p=d[0],m=d[1];if(s)return null;var h="Post"===(null===u||void 0===u||null===(n=u.post)||void 0===n?void 0:n.__typename)?u.post:null,f=null===u||void 0===u?void 0:u.boards;if(!h||!f)return(0,l.tZ)(P.xv,{children:"Something went wrong"});var Z={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(E.G,{css:[S.l0.colWithGap(24)],children:[(0,l.tZ)(P.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(E.G,{css:[S.l0.colWithGap(8)],children:[(0,l.BX)(T,{children:[(0,l.tZ)(I.X,{id:Z.isPinned,checked:Boolean(h.isPinned),onChange:function(){return o({isPinned:!h.isPinned})}}),(0,l.tZ)(X,{htmlFor:Z.isPinned,children:"Pin post to Community feed"})]}),h.canHide?(0,l.BX)(T,{children:[(0,l.tZ)(I.X,{id:Z.isHidden,checked:Boolean(h.isHidden),onChange:function(e){return o({isHidden:e.target.checked})}}),(0,l.tZ)(X,{htmlFor:Z.isHidden,children:"Hide post from listing"})]}):null]}),h.canChangeBoard?(0,l.BX)(T,{children:[(0,l.tZ)(U.P,{id:Z.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:h.board?{value:h.board,title:h.board.name}:void 0,onChange:function(e){return o({boardId:e.value.id})}}),(0,l.tZ)(X,{htmlFor:Z.isHidden,children:"Change board (requires reload)"})]}):null]})}var _=t(90171),D=t(77712),F=t(55923),W=t(3923),V=t(36994),A=t(625),M=t(62405),L=t(66539),O=t(39137),$=t(2041),z=t(45510),N=t(63128),q=t(25198),Q=t(70719),Y=E.K.form;function K(e){var n=e.commentId,t=e.onDone,r=(0,u.useState)(""),o=r[0],a=r[1],c=(0,p.Z)(),d=c.showConfirm,m=c.showError,h=(0,i.Z)((0,s.pn)({variables:{commentId:n,reason:o},onCompleted:function(e){"BoardReport"===e.reportReplComment.__typename?(d("Comment reported"),t()):m(e.reportReplComment.message)}}),2),f=h[0],v=h[1].loading;return(0,l.BX)(E.G,{css:[S.l0.colWithGap(24)],children:[(0,l.tZ)(P.h4,{level:2,variant:"subheadBig",children:"Report Comment"}),(0,l.BX)(Y,{onSubmit:function(e){e.preventDefault(),o?f():m("Please specify a reason to report this comment.")},css:[S.l0.colWithGap(32)],children:[(0,l.tZ)(E.G,{css:[S.l0.colWithGap(8)],children:(0,l.tZ)(O.B,{placeholder:"Why do you want to report this comment?",value:o,onChange:function(e){return a(e.currentTarget.value)},css:[S.l0.minHeight(64),S.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(E.G,{css:[S.l0.rowWithGap(16),S.l0.justify.end],children:[(0,l.tZ)(E.G,{children:(0,l.tZ)(z.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,l.tZ)(E.G,{children:(0,l.tZ)(z.zx,{disabled:v,text:v?"Reporting":"Report Comment",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(Q.Z,{})})})]})]})]})}function j(e){var n=e.initialValue,t=e.commentId,r=e.onReply,o=e.onCancel,a=(0,u.useState)(null),c=a[0],d=a[1],p=(0,i.Z)((0,s.cT)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,A.j)(A.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename||"UnauthorizedError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),m=p[0],h=p[1];return(0,l.tZ)(V.EQ,{error:c,initialValue:n,onCancel:o,onSubmit:function(e){h.loading||m({variables:{input:{body:e,replCommentId:t}}})}})}function J(e){var n=e.replId,t=e.placeholder,r=e.onComment,o=e.autoFocus,a=void 0!==o&&o,c=e.onCancel,p=void 0===c?function(){}:c,m=(0,u.useState)(!1),h=m[0],f=m[1],v=(0,u.useState)(null),Z=v[0],g=v[1],b=(0,i.Z)((0,s.Qp)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,A.j)(A.U3.COMMENT_MADE,{source:"spotlight"}),f(!0),void r(n);var t="UserError"===e.createReplComment.__typename||"UnauthorizedError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),C=b[0],R=b[1];return h?(0,l.tZ)(q.E,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){p(),f(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(V.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:Z,onCancel:function(){p(),g(null)},onSubmit:function(e){R.loading||C({variables:{input:{body:e,replId:n}}})}})}var ee={background:S.TV.backgroundDefault,borderRadius:S.TV.borderRadius8,scrollPaddingTop:"100px",padding:S.TV.space8,border:"solid 2px ".concat(S.TV.accentPrimaryDimmer)};function ne(e){var n=e.comment,t=e.onReply,a=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,_.useRouter)().query,b=g.c,C=Number(b),R=(0,p.Z)().showNotice,x=(0,i.Z)((0,s.g)(),2),w=x[0],y=x[1],k=(0,i.Z)((0,s.cq)({variables:{id:n.id},onCompleted:function(){D(null),a(n)}}),2),B=k[0],G=k[1],P=(0,i.Z)((0,s.oY)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],I=(0,u.useState)(!1),U=I[0],X=I[1],T=(0,u.useState)(null),H=T[0],D=T[1],F=H===V.nQ.Edit,W=n.user;(0,u.useEffect)((function(){var e;H===V.nQ.Hide||H===V.nQ.Show?P():H===V.nQ.CopyLink&&(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+n.repl.url+"?c="+n.id).then((function(){R("Copied!")})),D(null))}),[H,P]);var A=(0,u.useRef)(null),O=C===n.id;if((0,u.useEffect)((function(){(null===A||void 0===A?void 0:A.current)&&O&&A.current.scrollIntoView({behavior:"smooth"})}),[O,g.c]),!W)return null;var z=n.currentUserPermissions,N=Boolean(z);return(0,l.BX)(E.G,{css:[S.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},O?ee:null],children:[(0,l.tZ)(E.G,{innerRef:A,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(V.Yt,{user:W}),(0,l.BX)(E.G,{css:[S.l0.flex.growAndShrink(1),S.l0.colWithGap(4)],children:[(0,l.BX)(E.G,{css:[S.l0.align.center,S.l0.rowWithGap(16)],children:[(0,l.tZ)(V.wb,{user:W,timeCreated:n.timeCreated}),n.isHidden?(0,l.tZ)(L.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(M.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),F?(0,l.tZ)(V.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){y.loading||(w({variables:{input:{id:n.id,body:e}},optimisticResponse:{__typename:"RootMutationType",updateReplComment:(0,o.Z)((0,r.Z)({},n),{body:e})}}),D(null))},onCancel:function(){return D(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(m.Z,{useRemarkGfm:!1,children:n.body})}),U?(0,l.tZ)(E.G,{css:[S.l0.pt(12)],children:(0,l.tZ)(j,{initialValue:"@".concat(W.username," "),commentId:f,onReply:function(e){t(e),X(!1)},onCancel:function(){return X(!1)}})}):(0,l.BX)(E.G,{css:[S.l0.rowWithGap(8),{marginLeft:-4}],children:[N&&!n.isHidden&&Z?(0,l.tZ)(V.g4,{onClick:function(){return X(!0)}}):null,v]})]}),F?null:(0,l.tZ)(E.G,{css:[U&&{visibility:"hidden"}],children:(0,l.tZ)(V.pl,{className:"actions",canEdit:Boolean(null===z||void 0===z?void 0:z.edit),canReport:Boolean(null===z||void 0===z?void 0:z.report),canEditSettings:!1,canDelete:Boolean(null===z||void 0===z?void 0:z.delete),onAction:D,canHideComment:Boolean(null===z||void 0===z?void 0:z.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===z||void 0===z?void 0:z.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)($.u,{isOpen:H===V.nQ.Delete,onRequestClose:function(){return D(null)},children:(0,l.tZ)(h.Z,{delete:function(){G.loading||B({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return D(null)}})}),(0,l.tZ)($.u,{isOpen:H===V.nQ.Report,onRequestClose:function(){return D(null)},children:(0,l.tZ)(K,{commentId:n.id,onDone:function(){return D(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function te(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,o=e.onCancel,i=(0,u.useState)(n),a=i[0],c=i[1],s=(0,u.useState)(t),p=s[0],m=s[1],h=(0,V.Ex)(),Z=(0,v.H)();return(0,l.BX)(V.l0,{css:[S.l0.colWithGap(8),S.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:p})},children:[(0,l.BX)(E.G,{css:[S.l0.colWithGap(16)],children:[(0,l.BX)(E.G,{css:[S.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:Z("title"),children:(0,l.tZ)(P.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,l.tZ)(O.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:Z("title")})]}),(0,l.tZ)(f.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:p})},initialValue:p,onChange:m,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(E.G,{css:[S.l0.rowWithGap(8),S.l0.justify.end],children:[(0,l.tZ)(z.zx,{text:"Cancel",onClick:o}),(0,l.tZ)(z.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===p&&n===a})]})]})}function re(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,_.useRouter)().query.c,b=Number(g),C=(0,p.Z)(),R=C.showError,x=C.showNotice,w=(0,i.Z)((0,s.kz)({onError:function(e){return R(e.message)}}),2),y=w[0],k=w[1],B=(0,i.Z)((0,s.g)(),2),G=B[0],I=B[1],U=(0,i.Z)((0,s.cq)({variables:{id:t.id},onCompleted:function(){J(null),d(t)}}),2),X=U[0],T=U[1],A=(0,i.Z)((0,s.oY)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],O=(0,u.useState)(!1),z=O[0],q=O[1],Q=(0,u.useState)(null),Y=Q[0],J=Q[1],ee=Y===V.nQ.Edit,ne=t.user;(0,u.useEffect)((function(){var e;Y===V.nQ.Hide||Y===V.nQ.Show?A():Y===V.nQ.CopyLink&&(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+t.repl.url+"?c="+t.id).then((function(){x("Copied!")})),J(null))}),[Y,A]);var re=(0,u.useRef)(null),oe=b===t.id;if((0,u.useEffect)((function(){(null===re||void 0===re?void 0:re.current)&&oe&&(null===re||void 0===re||re.current.scrollIntoView({behavior:"smooth"}))}),[oe]),!ne)return null;var ie=t.currentUserPermissions,le=Boolean(ie),ae=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(N.T,{css:[S.l0.rowWithGap(8),S.l0.backgroundColor.backgroundDefault,S.l0.borderRadius(8),S.l0.border({color:oe?S.TV.accentPrimaryDimmer:S.TV.backgroundHigher,width:oe?2:1}),{":hover .actions":{opacity:1},position:"relative"}],background:"default",children:[(0,l.tZ)(E.G,{innerRef:re,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.BX)(E.G,{css:[S.l0.flex.growAndShrink(1),S.l0.flex.column,{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(N.T,{css:[S.l0.align.center,S.l0.rowWithGap(8),S.l0.p(8),S.l0.border({direction:"bottom",color:S.TV.backgroundHigher}),S.l0.borderRadius(8,8,0,0),S.l0.pr(8)],background:"higher",children:[(0,l.tZ)(V.Yt,{user:ne}),(0,l.tZ)(F.Z,{username:ne.username,children:(0,l.tZ)(D.ZP,{user:ne,children:(0,l.tZ)("a",{css:[{color:"inherit"}],className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]]),children:ne.username})})}),(0,l.BX)(E.G,{css:[S.l0.flex.growAndShrink(1),S.l0.rowWithGap(4),S.l0.align.center,{overflow:"hidden"}],children:[(0,l.tZ)(P.xv,{color:"dimmest",children:"published an update"}),(0,l.tZ)(P.xv,{color:"dimmest",children:"\u2022"}),(0,l.tZ)(W.E,{date:t.timeCreated,textColor:"dimmest"}),t.isHidden?(0,l.tZ)(L.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(M.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),ee?null:(0,l.tZ)(E.G,{css:[z&&{visibility:"hidden"}],children:(0,l.tZ)(V.pl,{className:"actions",canEdit:Boolean(null===ie||void 0===ie?void 0:ie.edit),canReport:n.canReport,canEditSettings:ae,canDelete:Boolean(null===ie||void 0===ie?void 0:ie.delete),onAction:J,canHideComment:Boolean(null===ie||void 0===ie?void 0:ie.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===ie||void 0===ie?void 0:ie.canHideComment)&&Boolean(t.isHidden)})})]}),(0,l.BX)(E.G,{css:[S.l0.p(16),S.l0.flex.column,S.l0.colWithGap(8)],children:[ee?(0,l.tZ)(te,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var i=e.title,l=e.body;I.loading||k.loading||(y({variables:{input:{id:n.id,title:i}},optimisticResponse:{__typename:"RootMutationType",updatePost:{__typename:"UpdatePostPayload",post:(0,o.Z)((0,r.Z)({},n),{title:i})}}}),G({variables:{input:{id:t.id,body:l}},optimisticResponse:{__typename:"RootMutationType",updateReplComment:(0,o.Z)((0,r.Z)({},t),{body:l})}}),J(null))},onCancel:function(){return J(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(P.xv,{variant:"subheadBig",children:n.title}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(m.Z,{useRemarkGfm:!1,children:t.body})})]}),ee?null:(0,l.tZ)(l.HY,{children:z?(0,l.tZ)(E.G,{css:[S.l0.pt(12)],children:(0,l.tZ)(j,{initialValue:"@".concat(ne.username," "),commentId:f,onReply:function(e){a(e),q(!1)},onCancel:function(){return q(!1)}})}):(0,l.BX)(E.G,{css:[S.l0.rowWithGap(2),{marginLeft:-4}],children:[le&&Z?(0,l.tZ)(V.g4,{onClick:function(){return q(!0)}}):null,v]})})]})]}),(0,l.tZ)($.u,{isOpen:Y===V.nQ.Delete,onRequestClose:function(){return J(null)},children:(0,l.tZ)(h.Z,{delete:function(){T.loading||X({variables:{id:t.id}})},entityType:"post",hideModal:function(){return J(null)}})}),(0,l.tZ)($.u,{isOpen:Y===V.nQ.Report,onRequestClose:function(){return J(null)},children:(0,l.tZ)(K,{commentId:t.id,onDone:function(){return J(null)}})}),(0,l.tZ)($.u,{isOpen:Y===V.nQ.Settings,onRequestClose:function(){return J(null)},children:(0,l.tZ)(H,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function oe(e){var n,t=e.comment,r=e.onReply,o=e.onDelete,i=e.commentsEnabled,a=(0,_.useRouter)().query.c,c=Number(a),s=t.replies,d=(0,u.useState)(s.some((function(e){return e.id===c}))),p=d[0],m=d[1],h=s.length,f=h?(0,l.tZ)(V.tE,{onClick:function(){return m((function(e){return!e}))},repliesCount:h,isExpanded:p}):null,v=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return v?(0,l.BX)(l.HY,{children:[(0,l.tZ)(re,{replyToId:t.id,post:v,comment:t,toggleRepliesButton:f,onReply:function(e){m(!0),r(e)},onDelete:o,commentsEnabled:i}),p?(0,l.tZ)(E.G,{css:[S.l0.colWithGap(32),S.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(ne,{commentsEnabled:i,comment:e,onReply:r,onDelete:o,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(E.G,{css:[S.l0.colWithGap(32)],children:[(0,l.tZ)(ne,{commentsEnabled:i,replyToId:t.id,comment:t,toggleRepliesButton:f,onReply:function(e){m(!0),r(e)},onDelete:o}),p&&0!==h?(0,l.tZ)(E.G,{css:[S.l0.colWithGap(32),S.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(ne,{commentsEnabled:i,comment:e,onReply:r,onDelete:o,replyToId:t.id},e.id)}))}):null]})}},19075:function(e,n,t){t.d(n,{ex:function(){return p}});var r=t(72006),o=t(43119),i=t(71440),l=t(66578),a=t(51034),c=t(24635);function u(){var e=(0,o.Z)(["\n  query ReplViewComments($replId: String!, $count: Int = 100, $after: String) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        url\n        owner {\n          ... on User {\n            id\n            ...ReplViewCommentsUser\n          }\n          ... on Team {\n            id\n          }\n        }\n        multiplayers {\n          id\n          ...ReplViewCommentsUser\n        }\n        currentUserPermissions {\n          changeCommentSettings\n        }\n        commentSettings {\n          id\n          enabled\n        }\n        comments(count: $count, after: $after) {\n          items {\n            id\n            ...ReplViewCommentsReplCommentThread\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n        ...ReplViewReplCommentsHeaderRepl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,i.Ps)(u(),l.P9,l.xB,a.d4);function p(e){var n=(0,r.Z)({},s,e);return c.a(d,n)}},51034:function(e,n,t){t.d(n,{d4:function(){return s},k2:function(){return p}});var r=t(72006),o=t(43119),i=t(71440),l=t(50216);function a(){var e=(0,o.Z)(["\n  fragment ReplViewReplCommentsHeaderRepl on Repl {\n    id\n    commentCount\n    currentUserPermissions {\n      changeCommentSettings\n    }\n    commentSettings {\n      id\n      enabled\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,o.Z)(["\n  mutation ReplViewReplCommentsHeaderSetReplCommentSettings(\n    $input: SetReplCommentSettingsInput!\n  ) {\n    setReplCommentSettings(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplCommentsHeaderRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,i.Ps)(a()),d=(0,i.Ps)(c(),s);function p(e){var n=(0,r.Z)({},u,e);return l.D(d,n)}},6933:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(72006),o=t(4405),i=t(2272),l=t(74985),a=t(50959),c=t(79908),u=t(39541),s=t(85368),d=t(43312),p=t(30826),m=t.n(p),h=function(e){var n=e.children,t=e.gap,r=void 0===t?32:t,o=(0,i.Z)(a.useState(!1),2),c=o[0],p=o[1],h=(0,i.Z)(a.useState(0),2),f=h[0],v=h[1],Z=(0,i.Z)(a.useState(0),2),g=Z[0],b=Z[1],C=a.useRef(null),R=a.useRef(null);a.useEffect((function(){var e=m()((function(){C.current&&R.current&&(v(C.current.offsetWidth),b(R.current.offsetWidth)),p(f>g)}),100);return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[f,g]);var x=32*(f+r),w=3e3/x*100,y=Math.min(Math.max(w,1),99),k=(0,d.F4)("\n    0% { transform: translateX(0%); }\n    ".concat(y,"% { transform: translateX(0%); }\n    100% { transform: translateX(calc(-100% - ").concat(r,"px)); }\n  ")),B={animation:c?"".concat(k," ").concat(x,"ms linear infinite"):"none"};return(0,l.tZ)("div",{ref:R,css:[u.l0.width("100%"),u.l0.overflow("hidden"),c?{maskImage:"linear-gradient(to left, transparent, black 16px, black)"}:null],children:(0,l.BX)(s.G,{css:[u.l0.flex.row,u.l0.width("max-content")],children:[(0,l.tZ)("div",{ref:C,css:B,children:n}),c?(0,l.tZ)("div",{"aria-hidden":!0,css:[B,{marginLeft:r}],children:n}):null]})})},f=t(61284),v=t(76735),Z=t(53212),g=t(89635),b=t(75863),C=t(25198),R=t(32905);function x(e){var n=e.repl,t=e.iconEditable,a=e.currentUser,d=e.hideActions,p=e.small,m=(0,i.Z)((0,c.cu)(),1)[0],x=(0,g.W)((function(e){return m({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(s.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(s.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[t?null:(0,l.tZ)(b.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(g.Z,{size:32,value:x.previewUrl||n.iconUrl,onUpload:function(e){return x.uploadImage(e,R.N.ReplIcon)},isUploading:Boolean(x.previewUrl)}):null,(0,l.tZ)(h,{children:(0,l.tZ)(f.h4,{variant:p?"headerDefault":"headerBig",level:1,css:[u.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title})}),!d&&(0,l.tZ)(Z.Z,{repl:n,currentUser:a,source:"coverPage"})]}),x.error?(0,l.tZ)(s.G,{css:[u.l0.align.start],children:(0,l.tZ)(C.E,{icon:(0,l.tZ)(v.Z,{}),colorway:"negative",text:x.error,closable:!0,closeAction:x.clearError})}):null]})}},50946:function(e,n,t){t.d(n,{P:function(){return u}});var r=t(74985),o=(t(50959),t(82893)),i=t.n(o),l=t(85368),a=t(96351),c=l.K.a;function u(e){return(0,r.tZ)(i(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.BX)(c,{ref:e.innerRef,className:e.className,rel:e.rel,role:"link",target:e.target,onClick:e.onClick,css:[(0,a.E)({colorway:e.colorway,clickable:!0,iconLeft:!!e.iconLeft,iconRight:!!e.iconRight}),{color:"inherit",transition:"background-color 120ms ease-out, color 120ms ease-out"}],children:[e.iconLeft,(0,r.tZ)("span",{children:e.text}),e.iconRight]})})}}}]);
//# sourceMappingURL=671-51b66115ef5975d5.js.map